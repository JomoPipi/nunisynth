<html lang="en">




<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, maximum-scale=0.5, user-scalable=0">
    
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.scss"><link href="https://fonts.googleapis.com/css?family=Baloo+Chettan+2&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Baloo+Chettan+2&display=swap" rel="stylesheet">
    
    <title> Nuni Synth v0 </title>

</head>




<body>




    <!-- <span id="debug" style="position: absolute; top:0; left: 0; z-index:999;">  DEBUG </span> -->


    <!-- GRAPH PAGE -->
    <div id="graph-page" class='page'>

        <!-- GOTO KEYBOARD PAGE  -->
        <button class='neumorph tr-corner' onclick="
            showPage(D('keyboard-page'))
        "> keyboard </button>

        <!-- MASTER VOLUME -->
        <input type="range" id="vol-slider" min=0 max=1 step=0.0001 value=1 
            oninput="setMasterVolume(+this.value/nGraphs)">


        <!-- THE GRAPH ITSELF  -->
        <canvas id="nuni-graph"></canvas>
        

        <!-- NODE EDIT PAGE  -->
        <div id="node-edit-page">

            <button class="neumorph"
                onclick="leaveNodeEditPage()"> back &lt;= </button> <br> <br>

            <!-- NODE TYPE AND ID  -->
            <span id="node-edit-page-text"> This message shouldn't be here by the time the page loads. </span> 
            <br>

            <div id="osc-gain-filter">
                <!-- SEE "createNodeEditPage.js"  -->
            </div>

            <div id="mappings-page" style="display: none;" class="neumorph">
                <div id="mapping-type-text"></div>
                <span> y-axis connection with keyboard: </span>
                <span id="y-axis-factor-text"></span>
                <input type="range" id="y-axis-factor" class="neumorph" min=-9 max=9 value=0 step=0.125>
            </div>


            <!-- DELETE NODE  -->
            <button style="position: absolute; bottom:0; right: 0;"
                onclick="handleDeleteNode()"> delete this node </button> 

        </div>
        <!-- END NODE EDIT PAGE -->

        <!-- PRESETS  -->
        <div id="presets"></div>
    </div>
    <!-- END GRAPH PAGE  -->
















    <!-- THE KEYBOARD  -->
    <div id="keyboard-page" class='page'>
        
        <button id="open-panel" class='neumorph page-swapper' onclick="KB.toggleSidePanel()">
            &lt;&lt;&lt;
        </button>

        <div id="kb-and-sidepanel">

            <div class="wood-element-0"></div>

            <canvas id="keyboard"></canvas>
                
            <div class="wood-element-0"></div>


            <div id="side-panel">


                <button class='neumorph tr-corner' onclick="
                    showPage(D('graph-page'))
                "> advanced </button>

                <br> 
                        
                <!-- CHOOSE KEYBOARD MODE  -->
                <!-- <label for="keyboardmode"> tone </label> -->
                <select id="keyboard-mode" name="keyboardmode"
                    oninput="
                        KB.kbMode = this.value
                        D('notes-per-octave-box').style.display = this.value === 'chromatic' ? 'inline' : 'none'
                        KB.update()
                    ">
                    <!-- <option value="scale">      scale       </option> -->
                    <option value="major">      Major       </option>
                    <option value="dorian">     Dorian      </option>
                    <option value="phrygian">   Phrygian    </option>
                    <option value="lydian">     Lydian      </option>
                    <option value="mixolydian"> Mixolydian  </option>
                    <option value="minor">      Minor       </option>
                    <option value="locrian">    Locrian     </option>
                    <option value="chromatic">  Microtonal  </option>
                </select> 

                
                <!-- CHOOSE NOTES PER OCTAVE (IF MODE == CONTINUOUS) -->
                <span id="notes-per-octave-box" style='display:none'>
                    <br>
                    <label for="npo" class="text0"> tones per octave </label>
                    <span id="notes-per-octave-text" class="text0"> 12 </span> <br>
                    <input type="range" id="notes-per-octave" class="slider"
                    min=1 max=24 step=1 value=12 name='npo'
                    oninput="
                        KB.notesPerOctave = +this.value
                        KB.NRT2 = 2 ** (1 / (+this.value))
                        D('notes-per-octave-text').innerHTML = this.value
                        KB.update()
                    ">
                </span>
                
                <br>

                <!-- CHOOSE NUMBER OF OCTAVES -->
                <label for="pitchrange" class="text0"> octaves </label>
                <span id="pitch-range-text" class="text0"> 3 </span> <br>
                <input type="range" name="pitchrange" id="pitch-range" class="slider"
                min=1 max=7 step=1 value=3
                oninput="
                    KB.rows = KB.octaves = D('pitch-range-text').innerHTML = +this.value
                    KB.update()
                ">
                
                <br>

                <!-- ADSR -->
                <div id="adsr-box" class="neumorph">

                    ADSR
                    <br>
                    <canvas id="adsr-attack" class="js-dial" width=50 height=50>
                    </canvas>
    
                    <canvas id="adsr-decay" class="js-dial" width=50 height=50>
                    </canvas>
    
                    <canvas id="adsr-sustain" class="js-dial" width=50 height=50>
                    </canvas>
    
                    <canvas id="adsr-release" class="js-dial" width=50 height=50>
                    </canvas>
    
                    <br>
                    <canvas id="adsr-visual"></canvas>
    
                </div>
            </div>

        </div>


    </div>














    <!-- NAVIGATE THROUGH PAGES  -->
    <!-- <select id="page-select" class="page-swapper" name="pageselect"
    oninput=" showPage(D(this.value + '-page')) ">
        <option value="keyboard">       Keyboard          </option>
        <option value="settings">       Keyboard Settings </option>
        <option value="graph">          Audio Graph       </option>
    </select> -->

</body>

<script src='/scripts/dials.js'></script>
<script src='/scripts/adsr.js'></script>
<script src='scripts/setup.js'></script>
<script src='scripts/nunigraph.js'></script>
<script src='scripts/createNodeEditPage.js'></script>
<script src='scripts/keyboard.js'></script>
<script src='scripts/pagehelper.js'></script>
<script src='scripts/index.js'></script>
<script src='scripts/resize.js'></script>
<script src='scripts/graphPageHandlers.js'></script>
<script src='/scripts/presets.js'></script>

</html>