<html lang="en">




<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5,
    maximum-scale=0.5, maximum-scale=0.5, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="styles.scss">

    <title>Mobile Synth</title>

</head>




<body>




    <!-- <span id="debug" style="position: absolute; top:0; left: 0; z-index:999;" > debug</span> -->




    <!-- GRAPH PAGE -->
    <div id="graph-page" class='page'>


        <!-- MASTER VOLUME -->
        <input type="range" id="vol-slider" min=0 max=0.5 step=0.0001 value=0.5
            oninput=" masterGain.gain.setValueAtTime(G.savedGain = +this.value, 0) ">


        <!-- THE GRAPH ITSELF  -->
        <canvas id="nuni-graph"></canvas>
        

        <!-- NODE EDIT PAGE  -->
        <div id="node-edit-page">

            <button style="font-size:2em" onclick="
                D('node-edit-page').style.display = 'none'
                D('mappings-page').style.display = 'none'
                G.selectedNode = null
                G.paint()
            "> &lt;= </button>

            <!-- NODE TYPE AND ID  -->
            <span id="node-edit-page-text"> This message shouldn't be here by the time the page loads. </span> 
            <br>
            
            <!-- Y-AXIS INFLUENCE VALUE -->
            <!-- <label for="y-axis-factor">Y-AXIS INFLUENCE FACTOR: </label>
            <label id="y-axis-factor-text" for="y-axis-factor"> 0 </label>
            <input type="range" id='y-axis-factor' name='y-axis-factor' 
            min='0' max='9' value='0' step='0.0001' oninput="
                G.selectedNode.yAxisFactor = +this.value
                D('y-axis-factor-text').innerHTML = this.value
                G.paint()
            "> -->

            <!-- OSCILLATOR ONLY -->

            <div id="osc-gain-filter"></div>

            <div id="mappings-page" style="display: none;">
                <div id="mapping-type-text"></div>
                <span> y-axis connection with keyboard: </span>
                <span id="y-axis-factor-text"></span>
                <input type="range" id="y-axis-factor" min=-9 max=9 value=0 step=0.125>
            </div>


            <!-- DELETE NODE  -->
            <button onclick="handleDeleteNode()" style="position: absolute; bottom:0; right: 0;"> 
                delete this node 
            </button> 

            <br>
            <br>

        </div>
        <!-- END NODE EDIT PAGE -->


    </div>
    <!-- END GRAPH PAGE  -->
















    <!-- THE KEYBOARD  -->
    <div id="keyboard-page" class='page'>
        <canvas id="fretboard"></canvas>
    </div>















    
    <!-- KEYBOARD SETTINGS PAGE  -->
    <div id="settings-page" class='page'>
        <br> 
        <br> 
        <br>

        <!-- CHOOSE KEYBOARD MODE  -->
        <label for="keyboardmode"> Keyboard Mode: </label>
        <select id="keyboard-mode" name="keyboardmode"
            oninput="
                K.kbMode = this.value
                D('notes-per-octave-box').style.display = this.value === 'chromatic' ? 'inline' : 'none'
                K.update()
            ">
            <option value="scale">      scale       </option>
            <option value="continuous"> continuous  </option>
            <option value="chromatic">  chromatic   </option>
        </select>

        <br> 
        
        <!-- CHOOSE NOTES PER OCTAVE (IF MODE == CONTINUOUS) -->
        <span id="notes-per-octave-box" style='display:none'>
            <label for="npo" class="text0">notes per octave:</label>
            <span id="notes-per-octave-text" class="text0"> 12 </span> <br>
            <input type="range" id="notes-per-octave" class="slider"
            min=1 max=24 step=1 value=12 name='npo'
            oninput="
                K.notesPerOctave = +this.value
                K.NRT2 = 2 ** (1 / (+this.value))
                D('notes-per-octave-text').innerHTML = this.value
                K.update()
            ">
        </span>
        
        <br> <br>

        <!-- CHOOSE NUMBER OF OCTAVES -->
        <label for="pitchrange" class="text0">pitch range:</label>
        <span id="pitch-range-text" class="text0"> 2 octaves </span> <br>
        <input type="range" name="pitchrange" id="pitch-range" class="slider"
        min=1 max=7 step=1 value=2
        oninput="
            const octs = this.value
            D('pitch-range-text').innerHTML = `${octs} octave${octs>1?'s':''}`
            K.octaves = octs
            K.update()
        ">



<!-- TODO -->
        <!-- <label for="attack" class="text0">attack:</label>
        <span id="attack-slider-text" class="text0"> 0 </span> <br>
        <input type="range" id="attack-slider" min="0" max="1" value="0" name="attack"
        step="0.0000001"
        oninput="
            const v = D('attack-slider-text').innerHTML = +this.value
            K.attack = v
        "> -->
    </div>
















    <!-- NAVIGATE THROUGH PAGES  -->
    <select id="page-select" name="pageselect"
    oninput=" showPage(D(this.value + '-page')) ">
        <option value="graph">          Graph           </option>
        <option value="keyboard">       Keyboard        </option>
        <option value="settings">       Settings        </option>
    </select>

</body>
<script src="scripts/setup.js"></script>
<script src="scripts/nunigraph.js"></script>
<script src='scripts/createNodeEditPage.js'></script>
<script src="scripts/keyboard.js"></script>
<script src="scripts/pagehelper.js"></script>
<script src="scripts/index.js"></script>
<script src="scripts/handlers.js"></script>
<script src='scripts/resize.js'></script>