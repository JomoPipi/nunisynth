<html lang="en">




<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5,
    maximum-scale=0.5, maximum-scale=0.5, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="styles.scss">

    <title>Mobile Synth</title>

</head>




<body>




    <span id="debug" style="position: absolute; top:0; left: 0; z-index:999;">  DEBUG </span>




    <!-- GRAPH PAGE -->
    <div id="graph-page" class='page'>


        <!-- MASTER VOLUME -->
        <input type="range" id="vol-slider" min=0 max=0.125 step=0.0001 value=0.125 
            oninput="setMasterVolume(+this.value/4)">


        <!-- THE GRAPH ITSELF  -->
        <canvas id="nuni-graph"></canvas>
        

        <!-- NODE EDIT PAGE  -->
        <div id="node-edit-page">

            <button class="neumorph"
                onclick="leaveNodeEditPage()"> back &lt;= </button> <br> <br>

            <!-- NODE TYPE AND ID  -->
            <span id="node-edit-page-text"> This message shouldn't be here by the time the page loads. </span> 
            <br>

            <div id="osc-gain-filter">
                <!-- SEE "createNodeEditPage.js"  -->
            </div>

            <div id="mappings-page" style="display: none;" class="neumorph">
                <div id="mapping-type-text"></div>
                <span> y-axis connection with keyboard: </span>
                <span id="y-axis-factor-text"></span>
                <input type="range" id="y-axis-factor" class="neumorph" min=-9 max=9 value=0 step=0.125>
            </div>


            <!-- DELETE NODE  -->
            <button style="position: absolute; bottom:0; right: 0;"
                onclick="handleDeleteNode()"> delete this node </button> 

        </div>
        <!-- END NODE EDIT PAGE -->

        <!-- PRESETS  -->
        <div id="presets"></div>
    </div>
    <!-- END GRAPH PAGE  -->
















    <!-- THE KEYBOARD  -->
    <div id="keyboard-page" class='page'>
        <canvas id="fretboard"></canvas>
    </div>















    
    <!-- KEYBOARD SETTINGS PAGE  -->
    <div id="settings-page" class='page'>
        <br> 
        <br> 
        <br>

        <!-- CHOOSE KEYBOARD MODE  -->
        <label for="keyboardmode"> Keyboard Mode: </label>
        <select id="keyboard-mode" name="keyboardmode"
            oninput="
                KB.kbMode = this.value
                D('notes-per-octave-box').style.display = this.value === 'chromatic' ? 'inline' : 'none'
                KB.update()
            ">
            <option value="scale">      scale       </option>
            <option value="chromatic">  chromatic   </option>
        </select>

        <br> 
        
        <!-- CHOOSE NOTES PER OCTAVE (IF MODE == CONTINUOUS) -->
        <span id="notes-per-octave-box" style='display:none'>
            <label for="npo" class="text0">notes per octave:</label>
            <span id="notes-per-octave-text" class="text0"> 12 </span> <br>
            <input type="range" id="notes-per-octave" class="slider"
            min=1 max=24 step=1 value=12 name='npo'
            oninput="
                KB.notesPerOctave = +this.value
                KB.NRT2 = 2 ** (1 / (+this.value))
                D('notes-per-octave-text').innerHTML = this.value
                KB.update()
            ">
        </span>
        
        <br> <br>

        <!-- CHOOSE NUMBER OF OCTAVES -->
        <label for="pitchrange" class="text0">pitch range:</label>
        <span id="pitch-range-text" class="text0"> 2 octaves </span> <br>
        <input type="range" name="pitchrange" id="pitch-range" class="slider"
        min=1 max=7 step=1 value=2
        oninput="
            const octs = this.value
            D('pitch-range-text').innerHTML = `${octs} octave${octs>1?'s':''}`
            KB.octaves = octs
            KB.update()
        ">

        <!-- ADSR -->
        <br> attack
        <input type="range" class="slider"
        min=0 max=1 step=0.00001 value=0
        oninput="ADSR[0] = +this.value">
        
        <br> decay
        <input type="range" class="slider"
        min=0 max=1 step=0.00001 value=0
        oninput="ADSR[1] = +this.value">

        <br> sustain
        <input type="range" class="slider"
        min=0 max=0.5 step=0.00001 value=0 
        oninput="ADSR[2] = +this.value">
        
        <br> release
        <input type="range" class="slider"
        min=0 max=2 step=0.00001 value=0
        oninput="ADSR[3] = +this.value">

    </div>
















    <!-- NAVIGATE THROUGH PAGES  -->
    <select id="page-select" name="pageselect"
    oninput=" showPage(D(this.value + '-page')) ">
        <option value="graph">          Graph           </option>
        <option value="keyboard">       Keyboard        </option>
        <option value="settings">       Keyboard Settings </option>
    </select>

</body>

<script src="scripts/setup.js"></script>
<script src="scripts/nunigraph.js"></script>
<script src='scripts/createNodeEditPage.js'></script>
<script src="scripts/keyboard.js"></script>
<script src="scripts/pagehelper.js"></script>
<script src="scripts/index.js"></script>
<script src='scripts/resize.js'></script>
<script src='scripts/graphPageHandlers.js'></script>
<script src='/scripts/presets.js'></script>

</html>